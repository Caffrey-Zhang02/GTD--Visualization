<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>world</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
<script src="js/d3.v6.js"></script>
<script type="text/javascript" src="js/jquery-3.6.0.js"></script>
<script type="text/javascript" src="js/jquery.range.js"></script>
<link href="css/jquery.range.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="css/style.css">
<script  src="js/script.js"></script>

<div id="scrollytelling">
  <div id="map"></div>
  <article class="timeline ">
    <div style="height: 250px;width: 1000px;"></div>
    <nav class="timeline__nav">
      <ul>
        <li><span>1970年</span></li>
        <li><span>1971年</span></li>
        <li><span>1972年</span></li>
        <li><span>1973年</span></li>
        <li><span>1974年</span></li>
        <li><span>1975年</span></li>
        <li><span>1976年 猛虎组织成立</span></li>
        <li><span>1977年</span></li>
        <li><span>1978年</span></li>
        <li><span>1979年</span></li>
        <li><span>1980年</span></li>
        <li><span>1981年</span></li>
        <li><span>1982年</span></li>
        <li><span>1983年</span></li>
        <li><span>1984年 奥姆真理教成立</span></li>
        <li><span>1985年</span></li>
        <li><span>1986年</span></li>
        <li><span>1987年</span></li>
        <li><span>1988年 基地组织成立</span></li>
        <li><span>1989年</span></li>
        <li><span>1990年</span></li>
        <li><span>1991年</span></li>
        <li><span>1992年</span></li>
        <li><span>1993年</span></li>
        <li><span>1994年 塔利班成立</span></li>
        <li><span>1995年 东京地铁沙林毒气</span></li>
        <li><span>1996年 斯里兰卡恐怖袭击</span></li>
        <li><span>1997年</span></li>
        <li><span>1998年 肯尼亚恐怖袭击</span></li>
        <li><span>1999年</span></li>
        <li><span>2000年</span></li>
        <li><span>2001年 911袭击事件</span></li>
        <li><span>2002年</span></li>
        <li><span>2003年 伊拉克战争</span></li>
        <li><span>2004年 别斯兰人质危机</span></li>
        <li><span>2005年</span></li>
        <li><span>2006年</span></li>
        <li><span>2007年</span></li>
        <li><span>2008年</span></li>
        <li><span>2009年</span></li>
        <li><span>2010年</span></li>
        <li><span>2011年 叙利亚内战</span></li>
        <li><span>2012年</span></li>
        <li><span>2013年</span></li>
        <li><span>2014年 伊斯兰国形成</span></li>
        <li><span>2015年</span></li>
        <li><span>2016年 伊拉克恐怖袭击</span></li>
        <li><span>2017年</span></li>
        <li><span>2018年</span></li>
        <li><span>2019年</span></li>
        <li><span>2020年</span></li>
        <li><span>2021年</span></li>
      </ul>
    </nav>
    <section class="timeline__section" >
      <div class="wrapper">
        <h2 class="milestone">1970年</h2><!-- 1970 -->
        <p><p>1970年，全球共发生了<font color="#800000"><b>651</b></font>起恐怖袭击，造成<font color="#800000"><b>174</b></font>人死亡，<font color="#800000"><b>212</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>美国</b></font>。</p>
        <h2 class="milestone">1971年</h2><!-- 1971 -->
        <p><p>1971年，全球共发生了<font color="#800000"><b>471</b></font>起恐怖袭击，造成<font color="#800000"><b>173</b></font>人死亡，<font color="#800000"><b>82</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>美国</b></font>。</p>
        <h2 class="milestone">1972年</h2><!-- 1972 -->
        <p>1972年，全球共发生了<font color="#800000"><b>567</b></font>起恐怖袭击，造成<font color="#800000"><b>485</b></font>人死亡，<font color="#800000"><b>409</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>英国</b></font>。</p>
        <h2 class="milestone">1973年</h2><!-- 1973 --> 
        <p>1973年，全球共发生了<font color="#800000"><b>473</b></font>起恐怖袭击，造成<font color="#800000"><b>370</b></font>人死亡，<font color="#800000"><b>495</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>英国</b></font>。</p>
        <h2 class="milestone">1974年</h2><!-- 1974 -->
        <p>1974年，全球共发生了<font color="#800000"><b>581</b></font>起恐怖袭击，造成<font color="#800000"><b>539</b></font>人死亡，<font color="#800000"><b>865</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>英国</b></font>。</p>
        <h2 class="milestone">1975年</h2><!-- 1975 -->
        <p>1975年，全球共发生了<font color="#800000"><b>740</b></font>起恐怖袭击，造成<font color="#800000"><b>617</b></font>人死亡，<font color="#800000"><b>617</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>英国</b></font>。</p>
        <h2 class="milestone">1976年 猛虎组织成立</h2>
        <p>1976年，恐怖组织“泰米尔伊拉姆猛虎解放组织”（简称猛虎组织）在<font color="#800000"><b>斯里兰卡</b></font>成立，其目标为在斯里兰卡东部和北部建立一个独立的泰米尔国家。自杀式炸弹袭击是猛虎组织最常用的袭击手段，许多高官政要在该类袭击中遇难。此外，猛虎组织还对斯里兰卡境内建筑物、商业中心、佛教圣地等地发动多次恐怖袭击。自2009年5月18日改组织的总司令战死，猛虎组织才逐渐被斯里兰卡军队消灭。</p>
        <h2 class="milestone">1977年</h2>
        <p>1977年，全球共发生了<font color="#800000"><b>1319</b></font>起恐怖袭击，造成<font color="#800000"><b>457</b></font>人死亡，<font color="#800000"><b>521</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>意大利</b></font>。</p>
        <h2 class="milestone">1978年</h2>
        <p>1978年，全球共发生了<font color="#800000"><b>1526</b></font>起恐怖袭击，造成<font color="#800000"><b>1459</b></font>人死亡，<font color="#800000"><b>1600</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>意大利</b></font>。</p>
        <h2 class="milestone">1979年</h2>
        <p>1979年，全球共发生了<font color="#800000"><b>2662</b></font>起恐怖袭击，造成<font color="#800000"><b>2100</b></font>人死亡，<font color="#800000"><b>2506</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>萨尔瓦多</b></font>。</p>
        <h2 class="milestone">1980年</h2>
        <p>1980年，全球共发生了<font color="#800000"><b>2661</b></font>起恐怖袭击，造成<font color="#800000"><b>4391</b></font>人死亡，<font color="#800000"><b>3637</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>萨尔瓦多</b></font>。</p>
        <h2 class="milestone">1981年</h2>
        <p>1981年，全球共发生了<font color="#800000"><b>2586</b></font>起恐怖袭击，造成<font color="#800000"><b>4851</b></font>人死亡，<font color="#800000"><b>3337</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>萨尔瓦多</b></font>。</p>
        <h2 class="milestone">1982年</h2>
        <p>1982年，全球共发生了<font color="#800000"><b>2543</b></font>起恐怖袭击，造成<font color="#800000"><b>5135</b></font>人死亡，<font color="#800000"><b>3342</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>萨尔瓦多</b></font>。</p>
        <h2 class="milestone">1983年</h2>
        <p>1983年，全球共发生了<font color="#800000"><b>2870</b></font>起恐怖袭击，造成<font color="#800000"><b>9444</b></font>人死亡，<font color="#800000"><b>4047</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>秘鲁</b></font>。</p>
        <h2 class="milestone">1984年 奥姆真理教成立</h2>
        <p>1984年，“奥姆真理教”在<font color="#800000"><b>日本</b></font>成立。奥姆真理教是日本一个融合瑜伽、印度教、气功、藏传佛教和基督教元素的邪教及恐怖组织，先后在日本本土发起松本沙林毒气事件、坂本堤律师灭门惨案、龟户异臭事件与东京地铁沙林毒气事件等恐怖活动。在高峰时期前后，奥姆真理教在日本有超过15400名成员，严重扰乱了日本的社会稳定。</p>
        <h2 class="milestone">1985年</h2>
        <p>1985年，全球共发生了<font color="#800000"><b>2914</b></font>起恐怖袭击，造成<font color="#800000"><b>7094</b></font>人死亡，<font color="#800000"><b>5112</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>萨尔瓦多</b></font>。</p>
        <h2 class="milestone">1986年</h2>
        <p>1986年，全球共发生了<font color="#800000"><b>2860</b></font>起恐怖袭击，造成<font color="#800000"><b>4976</b></font>人死亡，<font color="#800000"><b>5814</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>秘鲁</b></font>。</p>
        <h2 class="milestone">1987年</h2>
        <p>1987年，全球共发生了<font color="#800000"><b>3183</b></font>起恐怖袭击，造成<font color="#800000"><b>6482</b></font>人死亡，<font color="#800000"><b>5775</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>秘鲁</b></font>。</p>
        <h2 class="milestone">1988年 基地组织成立</h2>
        <p>1988年，本·拉登建立了恐怖组织“基地组织”，其宗旨为消灭全世界入侵伊斯兰世界的西方国家，以建立一个纯正统一的伊斯兰国家。数年来，基地组织策划了多宗针对美国的恐怖袭击，破坏了世界和平。</p>
        <h2 class="milestone">1989年</h2>
        <p>1989年，全球共发生了<font color="#800000"><b>4324</b></font>起恐怖袭击，造成<font color="#800000"><b>8152</b></font>人死亡，<font color="#800000"><b>5539</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>秘鲁</b></font>。</p>
        <h2 class="milestone">1990年</h2>
        <p>1990年，全球共发生了<font color="#800000"><b>3886</b></font>起恐怖袭击，造成<font color="#800000"><b>7036</b></font>人死亡，<font color="#800000"><b>6053</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>秘鲁</b></font>。</p>
        <h2 class="milestone">1991年</h2>
        <p>1991年，全球共发生了<font color="#800000"><b>4685</b></font>起恐怖袭击，造成<font color="#800000"><b>8454</b></font>人死亡，<font color="#800000"><b>7620</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>秘鲁</b></font>。</p>
        <h2 class="milestone">1992年</h2>
        <p>1992年，全球共发生了<font color="#800000"><b>5071</b></font>起恐怖袭击，造成<font color="#800000"><b>9745</b></font>人死亡，<font color="#800000"><b>10006</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>哥伦比亚</b></font>。</p>
        <h2 class="milestone">1993年</h2>
        <p>1993年是相对和平的一年。在1970至2021之间，这是唯一没有任何恐怖袭击发生的一年。</p>
        <h2 class="milestone">1994年 塔利班成立</h2>
        <p>1994年，穆罕穆德·奥尔马在<font color="#800000"><b>巴基斯坦</b></font>成立了恐怖组织“塔利班”，其宗旨为建立伊斯兰国家、实施伊斯兰教法。塔利班在阿富汗地区发动了多次恐怖袭击， 并先后两次夺取了阿富汗政权，实施极端激进的管理政策，让阿富汗地区民不聊生。</p>
        <h2 class="milestone">1995年 东京地铁沙林毒气</h2>
        <p>1995年3月20日，奥姆真理教在高峰时段向东京地铁的车厢中路释放沙林神经毒剂，造成了<font color="#800000"><b>13</b></font>人死亡，<font color="#800000"><b>5500</b></font>人受伤。是1970年以来造成<font color="#800000"><b>伤亡人数第二多</b></font>的恐怖袭击事件。</p>
        <h2 class="milestone">1996年 斯里兰卡恐怖袭击</h2>
        <p>1996年1月31日，盘踞于斯里兰卡东部和北部的恐怖组织猛虎组织使用汽车炸弹爆破斯里兰卡中央银行，共造成<font color="#800000"><b>90</b></font>人死亡，<font color="#800000"><b>1272</b></font>人受伤。这是1970年以来造成<font color="#800000"><b>伤亡人数第五多</b></font>的恐怖袭击事件。</p>
        <h2 class="milestone">1997年</h2>
        <p>1997年，全球共发生了<font color="#800000"><b>3198</b></font>起恐怖袭击，造成<font color="#800000"><b>10906</b></font>人死亡，<font color="#800000"><b>8968</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>哥伦比亚</b></font>。</p>
        <h2 class="milestone">1998年 肯尼亚恐怖袭击</h2>
        <p>肯尼亚连年遭受多次恐怖袭击，其中伤亡人数最多的是发生于1998年8月7日的美国大使馆爆炸案。自杀式袭击者在肯尼亚内罗毕的美国大使馆引爆了一枚汽车炸弹，共造成了<font color="#800000"><b>224</b></font>人死亡，<font color="#800000"><b>4000</b></font>人受伤，这也是1970年以来造成<font color="#800000"><b>伤亡人数第三多</b></font>的恐怖袭击事件。</p>
        <h2 class="milestone">1999年</h2>
        <p>1999年，全球共发生了<font color="#800000"><b>1396</b></font>起恐怖袭击，造成<font color="#800000"><b>3394</b></font>人死亡，<font color="#800000"><b>5405</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>哥伦比亚</b></font>。</p>
        <h2 class="milestone">2000年</h2>
        <p>2000年，全球共发生了<font color="#800000"><b>1823</b></font>起恐怖袭击，造成<font color="#800000"><b>4394</b></font>人死亡，<font color="#800000"><b>5797</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>印度</b></font>。</p>
        <h2 class="milestone">2001年 911袭击事件</h2>
        <p>2001年9月11日，19名基地组织恐怖分子劫持4架民航客机，其中两架飞机分别冲撞世界贸易中心双塔的一号大楼及二号大楼。在这场袭击中，全球近90个国家或地区的公民罹难，共造成<font color="#800000"><b>1385</b></font>人死亡、<font color="#800000"><b>10878</b></font>人受伤。这是1970年以来造成<font color="#800000"><b>伤亡人数最多</b></font>的恐怖袭击事件。</p>
        <h2 class="milestone">2002年</h2>
        <p>2002年，全球共发生了<font color="#800000"><b>1330</b></font>起恐怖袭击，造成<font color="#800000"><b>4797</b></font>人死亡，<font color="#800000"><b>7081</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>印度</b></font>。</p>
        <h2 class="milestone">2003年 伊拉克战争</h2>
        <p>伊拉克是全球恐怖活动频繁程度、袭击次数和死亡人数均<font color="#800000"><b>排名第一</b></font>的国家。在1970年至2021年间，伊拉克共发生恐怖袭击<font color="#800000"><b>28068</b></font>件，死伤数量共计<font color="#800000"><b>221956</b></font>人。而这一切袭击几乎都是从伊拉克战争之后发生的。在伊拉克战争之前，伊拉克国内的恐怖主义并不严重；2003年，美军侵入伊拉克之后，伊拉克恐怖袭击数量开始急速上升。尽管2011年美国从伊拉克撤军，但是伊拉克境内的恐怖主义仍然盛行，袭击数量继续增长，给伊拉克人民带来了极大的伤害。</p>
        <h2 class="milestone">2004年 别斯兰人质危机</h2>
        <p>2004年9月1日，车臣分离主义武装分子在别斯兰市第一中学制造了劫持学生、教师和家长作为人质的恐怖活动。这场恐怖袭击共造成了<font color="#800000"><b>333</b></font>人死亡，其中<font color="#800000"><b>186</b></font>人是儿童。由于这次袭击的主要攻击对象为儿童，性质非常恶劣，因此在国际上引起极大轰动。</p>
        <h2 class="milestone">2005年</h2>
        <p>2005年，全球共发生了<font color="#800000"><b>2017</b></font>起恐怖袭击，造成<font color="#800000"><b>6343</b></font>人死亡，<font color="#800000"><b>12961</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>伊拉克</b></font>。</p>
        <h2 class="milestone">2006年</h2>
        <p>2006年，全球共发生了<font color="#800000"><b>2757</b></font>起恐怖袭击，造成<font color="#800000"><b>9316</b></font>人死亡，<font color="#800000"><b>15470</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>伊拉克</b></font>。</p>
        <h2 class="milestone">2007年</h2>
        <p>2007年，全球共发生了<font color="#800000"><b>3250</b></font>起恐怖袭击，造成<font color="#800000"><b>12825</b></font>人死亡，<font color="#800000"><b>22531</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>伊拉克</b></font>。</p>
        <h2 class="milestone">2008年</h2>
        <p>2008年，全球共发生了<font color="#800000"><b>4801</b></font>起恐怖袭击，造成<font color="#800000"><b>9244</b></font>人死亡，<font color="#800000"><b>19168</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>伊拉克</b></font>。</p>
        <h2 class="milestone">2009年</h2>
        <p>2009年，全球共发生了<font color="#800000"><b>4723</b></font>起恐怖袭击，造成<font color="#800000"><b>9277</b></font>人死亡，<font color="#800000"><b>19147</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>伊拉克</b></font>。</p>
        <h2 class="milestone">2010年</h2>
        <p>2010年，全球共发生了<font color="#800000"><b>4827</b></font>起恐怖袭击，造成<font color="#800000"><b>7829</b></font>人死亡，<font color="#800000"><b>15953</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>伊拉克</b></font>。</p>
        <h2 class="milestone">2011年 叙利亚内战</h2>
        <p>2011年，在西方国家的煽动下，叙利亚爆发了颜色革命，并迅速发展为全面内战。国家的长期混乱让恐怖主义的迅速发展，导致了严重的难民危机。在1970至2021年间，叙利亚共发生恐怖袭击<font color="#800000"><b>3141</b></font>次，死伤数量共计<font color="#800000"><b>36948</b></font>人，超过<font color="#800000"><b>六百万</b></font>人逃离到其他国家，<font color="#800000"><b>六百万</b></font>人仍在境内流离失所。</p>
        <h2 class="milestone">2012年</h2>
        <p>2012年，全球共发生了<font color="#800000"><b>8525</b></font>起恐怖袭击，造成<font color="#800000"><b>15498</b></font>人死亡，<font color="#800000"><b>25451</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>巴基斯坦</b></font>。</p>
        <h2 class="milestone">2013年</h2>
        <p>2013年，全球共发生了<font color="#800000"><b>12047</b></font>起恐怖袭击，造成<font color="#800000"><b>22279</b></font>人死亡，<font color="#800000"><b>37694</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>伊拉克</b></font>。</p>
        <h2 class="milestone">2014年 伊斯兰国形成</h2>
        <p>2006年，一些中东地区的恐怖组织合并组建了更为庞大的恐怖组织“伊拉克伊斯兰国”，于2014年发展为耳熟能详的“伊斯兰国”（IS）。“伊斯兰国”拥有数万名军人，并且拥有大量军事武器，如枪械、火炮、坦克等，对世界各国的安全造成了极大的威胁。</p>
        <h2 class="milestone">2015年</h2>
        <p>2015年，全球共发生了<font color="#800000"><b>15138</b></font>起恐怖袭击，造成<font color="#800000"><b>38993</b></font>人死亡，<font color="#800000"><b>44204</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>伊拉克</b></font>。</p>
        <h2 class="milestone">2016年 伊拉克恐怖袭击</h2>
        <p>2016年1月11日，恐怖组织向<font color="#800000"><b>伊拉克基尔库克</b></font>发射了60枚火箭弹，至少造成了<font color="#800000"><b>3</b></font>人死亡和<font color="#800000"><b>1500</b></font>人受伤，是1970年以来造成<font color="#800000"><b>伤亡人数第四多</b></font>的恐怖袭击事件。有消息称，这次袭击是恐怖组织“伊斯兰国（IS）”所为。</p>
        <h2 class="milestone">2017年</h2>
        <p>2017年，全球共发生了<font color="#800000"><b>11364</b></font>起恐怖袭击，造成<font color="#800000"><b>26897</b></font>人死亡，<font color="#800000"><b>25594</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>伊拉克</b></font>。</p>
        <h2 class="milestone">2018年</h2>
        <p>2018年，全球共发生了<font color="#800000"><b>9853</b></font>起恐怖袭击，造成<font color="#800000"><b>23291</b></font>人死亡，<font color="#800000"><b>20609</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>阿富汗</b></font>。</p>
        <h2 class="milestone">2019年</h2>
        <p>2019年，全球共发生了<font color="#800000"><b>8537</b></font>起恐怖袭击，造成<font color="#800000"><b>20412</b></font>人死亡，<font color="#800000"><b>18776</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>阿富汗</b></font>。</p>
        <h2 class="milestone">2020年</h2>
        <p>2020年，全球共发生了<font color="#800000"><b>8438</b></font>起恐怖袭击，造成<font color="#800000"><b>22847</b></font>人死亡，<font color="#800000"><b>15466</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>阿富汗</b></font>。</p>
        <h2 class="milestone">2021年</h2>
        <p>2021年，全球共发生了<font color="#800000"><b>4960</b></font>起恐怖袭击，造成<font color="#800000"><b>11545</b></font>人死亡，<font color="#800000"><b>8333</b></font>人受伤。其中，遭受恐怖袭击次数最多的国家是<font color="#800000"><b>阿富汗</b></font>。</p>
      </div>
    </section>
    <div style="height:800px;width:1000px;"></div>
  </article>
</div>

<script>
    var projection = d3.geoOrthographic()
                       .center([0, 0])
                       .rotate([0, 0, 0])
                       .translate([window.innerWidth * 0.56, window.innerHeight * 0.47])
                       .scale(window.innerHeight * 0.45)
        path = d3.geoPath().projection(projection)
    var initialScale = projection.scale()
    var svg = d3.select("#map").append("svg").attr("width", 1400).attr("height", 880);
    let globe = svg.append("circle")
                    .attr("fill", "white")
                    .attr("stroke", "#000")
                    .attr("stroke-width", "0.2")
                    .attr('cx',window.innerWidth * 0.56)
                    .attr('cy',window.innerHeight * 0.47)
                    .attr("r", initialScale)

    d3.json('json文件/public_world.geojson').then(data=>{
        let features=data.features
        let map = svg.append("g")
        map.append("g")
            .attr("class", "countries" )
            .selectAll("path")
            .data(features)
            .enter().append("path")
            .attr("class", d => "country_" + d.properties.name.replace(" ","_"))
            .attr("d", path)
            .attr("fill", "#eee")
            .style('stroke', 'black')
            .style('stroke-width', 0.1)
            .style("opacity",0.8)
            })

            function iVersor(){return(
class Versor {
  static fromAngles([l, p, g]) {
    l *= Math.PI / 360;
    p *= Math.PI / 360;
    g *= Math.PI / 360;
    const sl = Math.sin(l), cl = Math.cos(l);
    const sp = Math.sin(p), cp = Math.cos(p);
    const sg = Math.sin(g), cg = Math.cos(g);
    return [
      cl * cp * cg + sl * sp * sg,
      sl * cp * cg - cl * sp * sg,
      cl * sp * cg + sl * cp * sg,
      cl * cp * sg - sl * sp * cg
    ];
  }
  static toAngles([a, b, c, d]) {
    return [
      Math.atan2(2 * (a * b + c * d), 1 - 2 * (b * b + c * c)) * 180 / Math.PI,
      Math.asin(Math.max(-1, Math.min(1, 2 * (a * c - d * b)))) * 180 / Math.PI,
      Math.atan2(2 * (a * d + b * c), 1 - 2 * (c * c + d * d)) * 180 / Math.PI
    ];
  }
  static interpolateAngles(a, b) {
    const i = Versor.interpolate(Versor.fromAngles(a), Versor.fromAngles(b));
    return t => Versor.toAngles(i(t));
  }
  static interpolateLinear([a1, b1, c1, d1], [a2, b2, c2, d2]) {
    a2 -= a1, b2 -= b1, c2 -= c1, d2 -= d1;
    const x = new Array(4);
    return t => {
      const l = Math.hypot(x[0] = a1 + a2 * t, x[1] = b1 + b2 * t, x[2] = c1 + c2 * t, x[3] = d1 + d2 * t);
      x[0] /= l, x[1] /= l, x[2] /= l, x[3] /= l;
      return x;
    };
  }
  static interpolate([a1, b1, c1, d1], [a2, b2, c2, d2]) {
    let dot = a1 * a2 + b1 * b2 + c1 * c2 + d1 * d2;
    if (dot < 0) a2 = -a2, b2 = -b2, c2 = -c2, d2 = -d2, dot = -dot;
    if (dot > 0.9995) return Versor.interpolateLinear([a1, b1, c1, d1], [a2, b2, c2, d2]);
    const theta0 = Math.acos(Math.max(-1, Math.min(1, dot)));
    const x = new Array(4);
    const l = Math.hypot(a2 -= a1 * dot, b2 -= b1 * dot, c2 -= c1 * dot, d2 -= d1 * dot);
    a2 /= l, b2 /= l, c2 /= l, d2 /= l;
    return t => {
      const theta = theta0 * t;
      const s = Math.sin(theta);
      const c = Math.cos(theta);
      x[0] = a1 * c + a2 * s;
      x[1] = b1 * c + b2 * s;
      x[2] = c1 * c + c2 * s;
      x[3] = d1 * c + d2 * s;
      return x;
    };
  }
}
)}
    var listItems = document.querySelectorAll(".timeline__nav li");
    var listItems2 = document.querySelectorAll(".wrapper h2");
    var listItems3 = document.querySelectorAll(".wrapper p");

    function updateOpacity() {
      var viewportHeight = window.innerHeight;
      var scrollPosition =  document.documentElement.scrollTop;

      listItems.forEach(function(li) {
        var rect = li.getBoundingClientRect();
        var liTop = rect.top;
        var liBottom = rect.bottom;

        // 计算相对于视口的位置
        var position = (liTop + liBottom) /2 - (viewportHeight / 2);

        // 根据位置计算透明度
        var opacity = 1 - 1.05*Math.abs(position) / (viewportHeight / 2);

        // 设置透明度
        li.style.opacity = opacity;
      });
      listItems2.forEach(function(li) {
        var rect = li.getBoundingClientRect();
        var liTop = rect.top;
        var liBottom = rect.bottom;

        // 计算相对于视口的位置
        var position = (liTop + liBottom) /2 - (viewportHeight / 2);

        // 根据位置计算透明度
        var opacity = 1 - 1.05*Math.abs(position) / (viewportHeight / 2);

        // 设置透明度
        li.style.opacity = opacity;
      });
      listItems3.forEach(function(li) {
        var rect = li.getBoundingClientRect();
        var liTop = rect.top;
        var liBottom = rect.bottom;

        // 计算相对于视口的位置
        var position = (liTop + liBottom) /2 - (viewportHeight / 2);

        // 根据位置计算透明度
        var opacity = 1 - 1.05*Math.abs(position) / (viewportHeight / 2);

        // 设置透明度
        li.style.opacity = opacity;
      });
    }

    window.addEventListener("scroll", updateOpacity);
    window.addEventListener("resize", updateOpacity);

    // 初始更新一次透明度
    updateOpacity();


    </script>

</body>
</html> 